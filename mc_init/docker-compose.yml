version: "3.8"
services:
  mc_init:
    image: itzg/minecraft-server
    environment:
      EULA: "TRUE"
      TYPE: FABRIC
      SETUP_ONLY: "TRUE"
      VERSION: "1.20.1"
      VANILLATWEAKS_FILE: |
        /vanillatweaks/datapacks.json,
        /vanillatweaks/resourcepacks.json
        /vanillatweaks/craftingtweaks.json
      MODRINTH_PROJECTS: |
        fabric-api
        chat-signing-hider
        coord-finder
        lambdynamiclights
        raised
        simple-voice-chat
        tooltipfix
        fabricquilt-chunk-pregenerator
        bluemap
        bmpv
        banners4bm
        shulkerboxtooltip
        where-items-owo
      MODRINTH_ALLOWED_VERSION_TYPE: beta
      TZ: "Europe/London"
      EXISTING_WHITELIST_FILE: SYNCHRONIZE
      WHITELIST_FILE: /config/allowlist.json
      EXISTING_OPS_FILE: SYNCHRONIZE
      OPS_FILE: /config/ops.json
      ICON: /resources/server-icon.png
      OVERRIDE_ICON: "TRUE"      
    volumes:
      - /opt/data:/data
      - /opt/percycraft/mc_init/vanillatweaks:/vanillatweaks:ro
      - /opt/percycraft/mc_init/config:/config:ro
      - /opt/percycraft/mc_init/resources/:/resources:ro  
    restart: no
